define(["jquery"],function(a){var e={getName:function(){return"cover_config_by_category_id@1.0.0"},getAuthKey:function(){return"45c48cce2e2d7fbdea1a-0a8005f5594bd670e1fa-b4b147bc622828831f11-d1fe358d5adec431996df04168c14e00"},createObj:function(){function e(){require([pinkephp.web_static_url+"static/components/tools/cpk_imgbox_upload.js","uploadify"],function(e){function i(){if(a(".jt_imgboxupload").length>0){var t=a(".jt_imgboxupload");if(t.hasClass("jt_imgboxupload")){var i=t.attr("data-fileUploadId"),d=t.attr("data-typename"),o=t.attr("data-inputname"),l=1==t.attr("data-autoSize")?!0:!1,u=t.attr("data-width"),r=t.attr("data-height"),p=e.createObj();p.initUploadImg({fileUploadId:i,typename:d,inputname:o,autoSize:l,width:u,height:r}),t.removeClass("jt_imgboxupload")}}}if(a(document).on("click",".J_cover_config_btn",function(){var e=a(this).attr("data-triggerform"),o=a(this).attr("data-frommodule"),l=a(".j_form_item_"+e+" select[name="+e+"] option:selected").val();a.ajax({type:"post",url:"/api/file/uploadconfig",data:{catid:l,from_module:o},success:function(e){if(1==e.status){var o={};o.k=1,o.imgurl="",o.subimgurl="",o.cover_id=0,a(d.coverDivId).html(t(e.data,o)),i()}else a.custom.alert(e.msg)}})}),a(d.ajaxReplaceId).length>0){var o=a(d.ajaxReplaceId),l={};l.k=o.attr("data-k"),l.imgurl=o.attr("data-imgurl"),l.subimgurl=o.attr("data-subimgurl"),l.cover_id=parseInt("{$form['value']}");var u=o.attr("data-catid"),r=o.attr("data-frommodule");a.ajax({type:"post",url:"/api/file/uploadconfig",data:{catid:u,from_module:r},success:function(e){if(1==e.status){var o=t(e.data,l);a(d.ajaxReplaceId).parent().append(o),a(d.ajaxReplaceId).remove(),i()}else a.custom.alert(e.msg)}})}})}function t(a,e){var t='<div id="{{uploadtype}}_0Box" data-fileUploadId="#file_upload{{k}}" data-autoSize="{{autosize}}" data-inputname="{{uploadtype}}_0" data-typename="{{uploadtype}}" data-width="{{width}}" data-height="{{height}}" class="m-public-imgboxupload jt_imgboxupload j_imgboxupload" style="width: {{width}}px;height: {{height}}px;">                        <a class="imgbox" href="{{imgurl}}" rel="group" style="display:none;"><img src="{{subimgurl}}" ></a>                        <input  type="file" name="mypic" id="file_upload{{k}}" class="fileInputBox" />                        <div id="fileQueueHide" style="display: none;">                        </div>                        <div class="u-imgboxupload-removebtn" style="display: none">删除</div>                        <input type="hidden" id="j_{{uploadtype}}_0_input" name="{{uploadtype}}_0" value="{{imgurl}}">                        <input type="hidden" id="j_{{uploadtype}}_0_id_input" name="cover_id" value="{{cover_id}}">                    </div>';return t=t.replace(/{{uploadtype}}/g,a.uploadtype),t=t.replace(/{{width}}/g,a.width),t=t.replace(/{{height}}/g,a.height),t=t.replace(/{{autosize}}/g,a.autosize),t=t.replace(/{{k}}/g,e.k),t=t.replace(/{{imgurl}}/g,e.imgurl),t=t.replace(/{{subimgurl}}/g,e.subimgurl),t=t.replace(/{{cover_id}}/g,e.cover_id)}var i={},d=(a(document),{coverDivId:"",ajaxReplaceId:""});return i.init=function(t){d=a.extend({},d,t),e()},i}};return e});