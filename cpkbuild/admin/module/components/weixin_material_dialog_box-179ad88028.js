define(["jquery","layer_dialog"],function(i,a){var e={createObj:function(){function e(){t(),o(),d(),n(),_(),s(),c()}function t(){i(".J_choose_this_text").off("click"),i(".J_choose_this_text").on("click",function(){var a=i(this),e=i(this).attr("data-builder-trigger-name"),t=1,o=i(this).val();i.ajax({type:"post",url:"/admin/weixin/set_media_id_from_dialog_choose",data:{media_id:o,reply_type:t},success:function(t){if(1==t.status){var o=i("#j_material_box_name_text_"+e);o.find(".j_material_text_textarea_"+e).val(t.data.data.content),i("input[name="+e+"_material_text_media_id]").val(t.data.media_id),u(a)}else i.custom.alert(t.msg)}})})}function o(){i(".J_choose_this_image").off("click"),i(".J_choose_this_image").on("click",function(){var a=i(this),e=i(this).attr("data-builder-trigger-name");console.log(e);var t=2,o=i(this).find(".content-check").find("input[name=image_media_id]").val();i.ajax({type:"post",url:"/admin/weixin/set_media_id_from_dialog_choose",data:{media_id:o,reply_type:t},success:function(t){if(1==t.status){var d=i("#j_material_box_name_image_"+e);d.find(".u-box-info").addClass("hidden"),d.find(".u-box-wrap").removeClass("hidden"),d.find(".wrap-imgbox span").css("background-image","url("+t.data.data.url+")"),i("input[name="+e+"_material_image_media_id]").val(t.data.media_id),u(a),p.trigger("Jt_material_image_choosed_callback",[t.data.data.url,o,e])}else i.custom.alert(t.msg)}})})}function d(){i(".J_choose_this_news").off("click"),i(".J_choose_this_news").on("click",function(){console.log("click");var a=i(this),e=i(this).attr("data-builder-trigger-name"),t="<div class='u-newslist-newsitem'>";t+=i(this).html(),t+="</div>";var o=3,d=i(this).find(".content-check").find("input[name=news_media_id]").val();i.ajax({type:"post",url:"/admin/weixin/set_media_id_from_dialog_choose",data:{media_id:d,reply_type:o},success:function(o){if(1==o.status){var d=i("#j_material_box_name_news_"+e);d.find(".u-box-info").addClass("hidden"),d.find(".u-box-wrap").removeClass("hidden"),d.find(".m-materialnews-list").html(t),i("input[name="+e+"_material_news_media_id]").val(o.data.media_id),u(a)}else i.custom.alert(o.msg)}})})}function n(){i(".J_choose_this_redpack").off("click"),i(".J_choose_this_redpack").on("click",function(){console.log("J_choose_this_redpack click");var a=i(this),e=i(this).attr("data-builder-trigger-name"),t=99,o=i(this).val();i.ajax({type:"post",url:"/admin/weixin/set_media_id_from_dialog_choose",data:{media_id:o,reply_type:t},success:function(t){if(1==t.status){console.log(t);var o=i("#j_material_box_name_redpack_"+e);o.find(".u-box-info").addClass("hidden"),o.find(".u-box-wrap").removeClass("hidden"),o.find(".u-box-wrap").find(".redpack_box").html(r(t.data.data)),i("input[name="+e+"_material_redpack_media_id]").val(t.data.media_id),u(a)}else i.custom.alert(t.msg)}})})}function _(){i(".J_choose_this_voice").off("click"),i(".J_choose_this_voice").on("click",function(){console.log("J_choose_this_voice click");var a=i(this),e=i(this).attr("data-builder-trigger-name"),t=4,o=i(this).val();i.ajax({type:"post",url:"/admin/weixin/set_media_id_from_dialog_choose",data:{media_id:o,reply_type:t},success:function(t){if(1==t.status){console.log(t);var o=i("#j_material_box_name_voice_"+e);o.find(".u-box-info").addClass("hidden"),o.find(".u-box-wrap").removeClass("hidden"),o.find(".u-box-wrap").find(".voice_box").html(m(t.data.data)),i("input[name="+e+"_material_voice_media_id]").val(t.data.media_id),u(a)}else i.custom.alert(t.msg)}})})}function s(){i(".J_choose_this_video").off("click"),i(".J_choose_this_video").on("click",function(){console.log("J_choose_this_video click");var a=i(this),e=i(this).attr("data-builder-trigger-name"),t=5,o=i(this).val();i.ajax({type:"post",url:"/admin/weixin/set_media_id_from_dialog_choose",data:{media_id:o,reply_type:t},success:function(t){if(1==t.status){console.log(t);var o=i("#j_material_box_name_video_"+e);o.find(".u-box-info").addClass("hidden"),o.find(".u-box-wrap").removeClass("hidden"),o.find(".u-box-wrap").find(".video_box").html(f(t.data.data)),i("input[name="+e+"_material_video_media_id]").val(t.data.media_id),u(a)}else i.custom.alert(t.msg)}})})}function c(){i(".J_choose_this_card").off("click"),i(".J_choose_this_card").on("click",function(){console.log("J_choose_this_card click");var a=i(this),e=i(this).attr("data-builder-trigger-name"),t=98,o=i(this).val();i.ajax({type:"post",url:"/admin/weixin/set_media_id_from_dialog_choose",data:{media_id:o,reply_type:t},success:function(t){if(1==t.status){console.log(t);var o=i("#j_material_box_name_card_"+e);o.find(".u-box-info").addClass("hidden"),o.find(".u-box-wrap").removeClass("hidden"),o.find(".u-box-wrap").find(".card_box").html(l(t.data.data)),i("input[name="+e+"_material_card_media_id]").val(t.data.media_id),u(a)}else i.custom.alert(t.msg)}})})}function l(i){var a="";return a+="<div style='background-color:"+i.base_info_color+";color:#fff;padding:10px;width:400px;'>[卡券]"+i.base_info_title+"</div>"}function r(i){var a="";return a+="<div style='background-color:#d26a5c;color:#fff;padding:10px;width:400px;'>[红包]"+i.wishing+" 金额："+i.min_value+"~"+i.max_value+"</div>"}function m(i){var a="";return a+="<div style='background-color:#2b99ff;color:#fff;padding:10px;width:400px;'>[语音]"+i.name+"</div>"}function f(i){var a="";return a+="<div style='background-color:#2b99ff;color:#fff;padding:10px;width:400px;'>[视频]"+i.name+"</div>"}function u(i){var e=i.closest(".layui-layer-page").attr("times");a.close(e)}var h={},p=i(document);return h.init=function(){console.log("material_dialog_init"),e()},h}};return e});