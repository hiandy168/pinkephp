define(["jquery","js_md5","./test_components","validator"],function($,md5,components_arr){function closeLayer(t){var e=t.closest(".layui-layer-page").attr("times");layer.close(e)}$(document).on("Jt_builder_form_class_trigger_init",function(){$(".jt_builder_form_class_trigger_init").length>0&&$(".jt_builder_form_class_trigger_init").each(function(t,e){var i=$(this),r=i.attr("data-on-field"),a=i.attr("data-on-values"),n=i.attr("data-trigger-items"),_=i.attr("data-is-init");if("true"!=_){i.attr("data-is-init","true");var o=a.split("||");if(""!=n)var s=n.split("|");else var s=[];$(document).on("Jt_builder_form_class_trigger_item_"+r,function(t,e){$.inArray(e,o)>-1&&$.each(s,function(t,e){var i=e.split("&"),r=i[0].toString(),a=i[1].toString(),n=i[2].toString();if("undefined"!=typeof i[3])var _=i[3].toString();var o=r.split(",");$.each(o,function(t,e){e.indexOf(".")>-1||e.indexOf("#")>-1?($(e).addClass(a),$(e).removeClass(n)):($(".j_form_item_"+e).addClass(a),$(".j_form_item_"+e).removeClass(n)),"undefined"!=typeof _&&(_.indexOf("[this]")>-1?$(document).trigger(_,[".j_form_item_"+e]):$(document).trigger(_))})})})}})}),$(document).on("Jt_builder_form_post_init",function(){$(".jt_builder_form_post_init").length>0&&$(".jt_builder_form_post_init").each(function(t,e){function i(){$(_).off("click"),$(_).on("click",function(){$(a).submit(),$(this).attr("disabled","true")})}var r=$(e),a=r.attr("data-form-id"),n=r.attr("data-trigger-click-a-id"),_=r.attr("data-post-buttom");i(),$(a).validator(function(t){$.ajax({type:"post",url:$(t).attr("action"),data:$(t).serialize(),success:function(t){if($(_).removeAttr("disabled"),1==t.status){if("undefined"!=typeof parent.layer){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e)}"undefined"!=typeof t.data.backurl?(layer.msg(t.msg,{time:1e3,icon:6}),window.location=t.data.backurl):"undefined"!=typeof t.data.click_a_to_url?(layer.msg(t.msg,{time:1e3,icon:6}),$(n).attr("href",t.data.click_a_to_url).trigger("click"),closeLayer($(n))):"undefined"!=typeof t.data.not_reload?("undefined"!=typeof t.data.trigger_name&&$(document).trigger(t.data.trigger_name,[t.data]),i()):(layer.msg(t.msg,{time:1e3,icon:6}),window.location.reload())}else $.custom.alert(t.msg),i()},error:function(){$(_).removeAttr("disabled"),i()}})})})}),$(document).on("Jt_builder_form_init",function(){if($(document).trigger("Jt_builder_form_class_trigger_init"),$(document).trigger("Jt_builder_form_post_init"),($(".J_choose_this_text").length>0||$(".J_choose_this_image").length>0||$(".J_choose_this_news").length>0||$(".J_choose_this_redpack").length>0||$(".J_choose_this_voice").length>0||$(".J_choose_this_video").length>0||$(".J_choose_this_card").length>0)&&require(["./components/weixin_material_dialog_box-179ad88028"],function(t){var e=t.createObj();e.init()}),eval(function(t,e,i,r,a,n){if(a=function(t){return(62>t?"":a(parseInt(t/62)))+((t%=62)>35?String.fromCharCode(t+29):t.toString(36))},0=="0".replace(0,a)){for(;i--;)n[a(i)]=r[i];r=[function(t){return n[t]||t}],a=function(){return"([6-9a-hj-zA-Z]|1\\w)"},i=1}for(;i--;)r[i]&&(t=t.replace(new RegExp("\\b"+a(i)+"\\b","g"),r[i]));return t}('8($(\'.O\').t>0){$(\'.O\').P(m(i,u){6 e=$(u);6 v=e.w();8(Q e.C(\'w-D-n\')=="undefined"||e.C(\'w-D-n\')=="x"){6 J=x;8(y.components_build=="o"){$.P(components_arr,m(i,u){8(u.name==v.R){J=o;e.S();8(!T()){j.k(\'你的站点未授权无法使用组件z打包功能,希望您能理解开发人员的不易\');E}6 F=u.U.V();F.n(v);e.C("w-D-n","o")}})}8(!J){6 d=v.R;d=d.W("@","/");d=d.W("~","/");require([y.web_static_url+\'static/p/builder/\'+d+\'/U.z\'],m(p){e.S();8(Q(p.K)=="m"){6 X=p.K();6 Y=p.getName();8(!Z(X,Y)){j.k(\'组件:\'+d+\'的authkey 错误,组件z初始化失败(如果改组件不需要z支持则无所谓)\');E}6 F=p.V();F.n(v);e.C("w-D-n","o");j.k(\'组件:\'+d+\'，z初始化成功\')}q{j.k(\'组件:\'+d+\'必须具有K的方法\')}})}}})}m T(){6 G=y.10;6 l=o;6 b=G.L("-");6 7=[];r(6 i=0;i<b.t;i++){6 s=[];r(f=0;f<b[i].t;f++){s.9(b[i].11(f))}7.9({\'12\':i,\'a\':s,\'c\':b[i]})}6 g=[];6 h=[];r(6 i=0;i<20;i++){8(7[0].a[i]==7[1].a[i]){g.9(1)}q{g.9(0)}8(7[1].a[i]==7[2].a[i]){h.9(1)}q{h.9(0)}}6 M=A(g.B(""),2);6 _turnover_id=A(h.B(""),2);6 H=14(y.website_url+7[0].c+"-"+7[1].c+"-"+7[2].c);8(7[3].c!=H){j.k("网站授权检测失败");l=x}E l}m Z(15,16){6 G=15+"-"+y.10;6 l=o;6 b=G.L("-");6 7=[];r(6 i=0;i<b.t;i++){6 s=[];r(f=0;f<b[i].t;f++){s.9(b[i].11(f))}7.9({\'12\':i,\'a\':s,\'c\':b[i]})}6 g=[];6 h=[];6 I=[];r(6 i=0;i<20;i++){8(7[0].a[i]==7[1].a[i]){g.9(1)}q{g.9(0)}8(7[1].a[i]==7[2].a[i]){h.9(1)}q{h.9(0)}8(7[4].a[i]==7[5].a[i]){I.9(1)}q{I.9(0)}}6 _component_id=A(g.B(""),2);6 N=A(h.B(""),2);6 M=A(I.B(""),2);8(N>0){8(M!=N){j.k("服务商id检测失败");l=x}}6 17=16.L(\'@\');6 H=14(17[0]+7[0].c+"-"+7[1].c+"-"+7[2].c);8(7[3].c!=H){j.k("组件授权检测失败");l=x}E l}',[],70,"||||||var|_obj_arr|if|push|array|_arr|str|component_dir|jt_obj|ii|_first_str_arr|_second_str_arr||console|log|_all_is_ok|function|init|true|components|else|for|_tmp|length|ele|_config|data|false|pinkephp|js|parseInt|join|attr|is|return|_aa|_all_key|_md5_value|_pinke_openid_str_arr|_is_find|getAuthKey|split|_bussiness_id|_local_bussiness_id|jt_form_builder_component|each|typeof|componentName|show|check_web_auth|main|createObj|replace|_components_key|_components_name|check_component_auth|web_openid|charAt|index||md5|_key|_name|_main_components_version_with_name_arr".split("|"),0,{})),$(".j_builder_treetable").length>0&&require(["jquery-treetable"],function(){$(".j_builder_treetable").each(function(t,e){"false"==$(this).attr("data-is-treetable-init")&&($(this).treetable({expandable:!0,initialState:"expanded"}),$(this).attr("data-is-treetable-init","true"))})}),$("#j_builder_search_field_input").length>0){var search_field=$("#j_builder_search_field_input").val();$(".j_search_field_btn").each(function(){var t=$(this);t.attr("data-field")==search_field&&$(".j_search_field_name").text(t.text())}),$(".J_search_field_btn").on("click",function(){var t=$(this).attr("data-field-name"),e=$(this).attr("data-field");$(".j_search_field_name").text(t),$("#j_builder_search_field_input").val(e)})}"#j_list_filter_time".length>0&&require(["jquery_datepicker"],function(){$("#j_list_filter_time_from").datepicker({autoclose:!0,format:"yyyy-mm-dd"}),$("#j_list_filter_time_to").datepicker({autoclose:!0,format:"yyyy-mm-dd"})})}),$(document).trigger("Jt_builder_form_init")});